{% extends 'base.html' %}
{% block content %}

<h1>{{ shop_name }}</h1>
<p>{{ name }}</p>  
<p>{{ class }}</p>

<a href="{% url 'main:create_product' %}" class="add-product-button">
    Add New SSP
</a>

<a href="{% url 'main:logout' %}" class ="logout-button">
    Logout
</a>

<h5>Sesi terakhir login: {{ last_login }}</h5>

{% if not products %}
    <p>Belum ada SSP yang tersedia.</p>
{% else %}
    <h2>Available Products</h2>
    <div class="product-carousel-container">
        <button id="prevBtn" class="scroll-button">←</button>
        <div class="product-carousel" id="productCarousel">
            {% for product in products %}
            <div class="product-card">
                <h3>{{ product.name }}</h3>
                <p>Price: Rp{{ product.price }}</p>
                <p>Category: {{ product.pack_category }}</p>
                <p>Level: {{ product.level_category }}</p>
                <p>{{ product.description }}</p>
            </div>
            {% endfor %}
        </div>
        <button id="nextBtn" class="scroll-button">→</button>
    </div>
{% endif %}



{% comment %}
Kode di bawah dibuat dengan bantuan Generative AI
Kode di bawah hanya untuk mempercantik tampilan
{% endcomment %}
<style>
    .add-product-button {
        display: inline-block;
        margin-bottom: 20px;
        padding: 10px 15px;
        background-color: #28a745;
        color: white;
        text-decoration: none;
        border-radius: 5px;
    }

    .add-product-button:hover {
        background-color: #218838;
    }

    .logout-button {
        display: inline-block;
        margin-bottom: 20px;
        padding: 10px 15px;
        background-color: #f91404;
        color: white;
        text-decoration: none;
        border-radius: 5px;
    }

    .logout-button:hover {
        background-color: #cb0d0d;
    }

    .product-carousel-container {
        position: relative;
        width: 100%;
        overflow: hidden;
        margin-top: 20px;
    }

    .product-carousel {
        display: flex;
        overflow-x: auto;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        -ms-overflow-style: none;
        padding: 10px 0;
    }

    .product-carousel::-webkit-scrollbar {
        display: none;
    }

    .product-card {
        flex: 0 0 auto;
        width: 280px;
        margin-right: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f9f9f9;
    }

    .scroll-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 123, 255, 0.7);
        color: white;
        border: none;
        padding: 10px;
        cursor: pointer;
        font-size: 18px;
        border-radius: 50%;
        z-index: 10;
        transition: opacity 0.3s ease;
    }

    .scroll-button:hover {
        background-color: rgba(0, 86, 179, 0.9);
    }

    .scroll-button.invisible {
        opacity: 0;
    }

    #prevBtn {
        left: 10px;
    }

    #nextBtn {
        right: 10px;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const carousel = document.getElementById('productCarousel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const cardWidth = 300;

        function scroll(direction) {
            carousel.scrollBy({
                left: cardWidth * direction,
                behavior: 'smooth'
            });
        }

        prevBtn.addEventListener('click', function() {
            scroll(-1);
        });

        nextBtn.addEventListener('click', function() {
            scroll(1);
        });

        function updateButtonVisibility() {
            const scrollPosition = carousel.scrollLeft;
            const maxScroll = carousel.scrollWidth - carousel.clientWidth;

            prevBtn.classList.toggle('invisible', scrollPosition <= 0);
            nextBtn.classList.toggle('invisible', scrollPosition >= (maxScroll - 30));
        }

        carousel.addEventListener('scroll', updateButtonVisibility);
        window.addEventListener('resize', updateButtonVisibility);

        updateButtonVisibility();
    });
</script>

{% endblock content %}